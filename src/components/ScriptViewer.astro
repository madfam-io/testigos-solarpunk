---
export interface Props {
  episodio: string;
  titulo: string;
  plataforma: 'TikTok' | 'Instagram' | 'YouTube';
  duracion: string;
  contenido: string;
}

const { episodio, titulo, plataforma, duracion, contenido } = Astro.props;

const platformColors = {
  TikTok: '#FF0050',
  Instagram: '#E4405F',
  YouTube: '#FF0000'
};

const platformIcons = {
  TikTok: 'üì±',
  Instagram: 'üì∑',
  YouTube: 'üì∫'
};
---

<article class="script-viewer">
  <header class="script-header">
    <div class="script-meta">
      <span class="platform-badge" style={`background-color: ${platformColors[plataforma]}`}>
        {platformIcons[plataforma]} {plataforma}
      </span>
      <span class="episode-number">{episodio}</span>
      <span class="duration">‚è±Ô∏è {duracion}</span>
    </div>
    <h2>{titulo}</h2>
  </header>
  
  <div class="script-content">
    <Fragment set:html={contenido} />
  </div>
  
  <footer class="script-actions">
    <button class="btn btn-secondary" onclick="window.print()">
      üìÑ Imprimir
    </button>
    <a href={`/guiones/${episodio.toLowerCase()}.pdf`} class="btn btn-secondary" download>
      ‚¨áÔ∏è Descargar PDF
    </a>
  </footer>
</article>

<style>
  .script-viewer {
    background-color: var(--fondo-secundario);
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 12px var(--sombra-suave);
  }
  
  .script-header {
    background-color: var(--negro-profundo);
    color: white;
    padding: var(--espacio-lg);
  }
  
  .script-meta {
    display: flex;
    gap: var(--espacio-md);
    align-items: center;
    margin-bottom: var(--espacio-md);
    flex-wrap: wrap;
  }
  
  .platform-badge {
    display: inline-flex;
    align-items: center;
    gap: var(--espacio-xs);
    padding: var(--espacio-xs) var(--espacio-sm);
    border-radius: 20px;
    color: white;
    font-size: 0.875rem;
    font-weight: 500;
  }
  
  .episode-number {
    background-color: var(--purpura-creativo);
    color: white;
    padding: var(--espacio-xs) var(--espacio-sm);
    border-radius: 4px;
    font-family: var(--fuente-mono);
    font-size: 0.875rem;
  }
  
  .duration {
    color: var(--amarillo-solar);
    font-size: 0.875rem;
  }
  
  .script-header h2 {
    color: white;
    margin-bottom: 0;
  }
  
  .script-content {
    padding: var(--espacio-xl);
    font-family: var(--fuente-mono);
    line-height: 1.8;
    white-space: pre-wrap;
  }
  
  .script-content :global(h2) {
    color: var(--verde-sostenible);
    font-size: 1.25rem;
    margin-top: var(--espacio-lg);
    margin-bottom: var(--espacio-md);
    font-family: var(--fuente-principal);
  }
  
  .script-content :global(h3) {
    color: var(--azul-tecnologico);
    font-size: 1rem;
    margin-top: var(--espacio-md);
    margin-bottom: var(--espacio-sm);
    font-family: var(--fuente-principal);
  }
  
  .script-content :global(em) {
    color: var(--texto-secundario);
    font-style: italic;
  }
  
  .script-content :global(strong) {
    color: var(--purpura-creativo);
    font-weight: bold;
  }
  
  .script-actions {
    padding: var(--espacio-lg);
    background-color: var(--fondo-primario);
    display: flex;
    gap: var(--espacio-md);
    justify-content: center;
  }
  
  @media print {
    .script-actions {
      display: none;
    }
    
    .script-viewer {
      box-shadow: none;
    }
  }
  
  @media (max-width: 768px) {
    .script-actions {
      flex-direction: column;
    }
    
    .script-actions .btn {
      width: 100%;
    }
  }
</style>