---
import BaseLayout from '../../layouts/BaseLayout.astro';
import MagazineCutoutImage from '../../components/MagazineCutoutImage.astro';

let basePath =
  import.meta.env.BASE_URL != null && import.meta.env.BASE_URL !== ''
    ? import.meta.env.BASE_URL
    : '/testigos-solarpunk';

// Ensure basePath doesn't end with a slash
if (basePath.endsWith('/')) {
  basePath = basePath.slice(0, -1);
}

// Buyer Personas
const personas = [
  {
    id: 'gaby',
    nombre: 'Gaby God√≠nez',
    apodo: 'La ecoestresada',
    edad: 33,
    ocupacion: 'Dise√±adora gr√°fica freelance',
    descripcion:
      'Quiere ser sostenible pero se siente abrumada por toda la informaci√≥n contradictoria',
    dolor: 'Saturaci√≥n de contenido y culpa ambiental',
    sketch: 'D√≠a 237 intentando ser sostenible',
  },
  {
    id: 'carlos',
    nombre: 'Carlos Mendoza',
    apodo: 'El esc√©ptico pragm√°tico',
    edad: 45,
    ocupacion: 'Gerente de ventas',
    descripcion:
      'Cree que la sostenibilidad es una moda cara para millennials privilegiados',
    dolor: 'Percibe lo eco como elitista y poco pr√°ctico',
    sketch: 'El panel solar que pag√≥ la universidad',
  },
  {
    id: 'sofia',
    nombre: 'Sof√≠a Ram√≠rez',
    apodo: 'La influencer consciente',
    edad: 26,
    ocupacion: 'Content creator',
    descripcion:
      'Busca contenido aut√©ntico sobre sostenibilidad que conecte con su audiencia',
    dolor: 'Miedo al greenwashing y p√©rdida de credibilidad',
    sketch: 'La app que salva el mundo... o no',
  },
  {
    id: 'miguel',
    nombre: 'Miguel √Ångel Torres',
    apodo: 'El maker curioso',
    edad: 19,
    ocupacion: 'Estudiante de ingenier√≠a',
    descripcion:
      'Le encanta crear y experimentar, busca proyectos DIY sostenibles',
    dolor: 'Falta de recursos y gu√≠as accesibles',
    sketch: 'Hackeando el futuro solar',
  },
  {
    id: 'laura',
    nombre: 'Laura Hern√°ndez',
    apodo: 'La mam√° activista',
    edad: 38,
    ocupacion: 'Maestra y madre de dos',
    descripcion:
      'Quiere ense√±ar valores sostenibles a sus hijos sin sonar sermoneadora',
    dolor: 'C√≥mo hacer la sostenibilidad divertida para ni√±os',
    sketch: 'El huerto que se volvi√≥ jungla',
  },
];

// Pain Points
const painPoints = [
  {
    tipo: 'economica',
    titulo: 'Barrera Econ√≥mica',
    creencia: '"Ser sostenible es caro"',
    solucion: 'Sketches mostrando alternativas accesibles y DIY',
    icon: 'üí∞',
  },
  {
    tipo: 'educativa',
    titulo: 'Barrera Educativa',
    creencia: '"Es muy complicado entender"',
    solucion: 'Humor que simplifica conceptos complejos',
    icon: 'üìö',
  },
  {
    tipo: 'cultural',
    titulo: 'Barrera Cultural',
    creencia: '"Los ecologistas son aburridos"',
    solucion: 'Comedia que conecta con la cultura pop',
    icon: 'üé≠',
  },
  {
    tipo: 'tiempo',
    titulo: 'Barrera de Tiempo',
    creencia: '"No tengo tiempo para esto"',
    solucion: 'Tips r√°pidos en sketches de 60 segundos',
    icon: '‚è±Ô∏è',
  },
];
---

<BaseLayout
  title="Comunidad"
  description="√önete a la comunidad de Testigos de Solarpunk"
>
  <section class="hero-comunidad">
    <div class="container">
      <h1>√önete al Movimiento</h1>
      <p class="hero-description">
        Una comunidad diversa unida por el humor y la esperanza de un futuro
        sostenible
      </p>
    </div>
  </section>

  <section class="personas-section newspaper-bg with-columns">
    <div class="container">
      <h2>¬øTe identificas con alguno?</h2>
      <p class="section-intro">
        Conoce a los personajes reales que inspiran nuestros sketches
      </p>

      <div class="personas-grid">
        {
          personas.map((persona) => (
            <article class="magazine-card card-lg theme-community interactive">
              <div class="persona-header">
                <div class="persona-avatar">
                  <MagazineCutoutImage
                    alt={`Avatar de ${persona.nombre} (${persona.apodo})`}
                    width={120}
                    height={120}
                    type="character"
                    prompt={`portrait of ${persona.nombre}, ${persona.ocupacion}, ${persona.apodo}, age ${persona.edad}`}
                    cutoutStyle="emoji-lg"
                    theme="community"
                    context="card"
                    interactive={true}
                    class="persona-image"
                  />
                </div>
                <div class="persona-info">
                  <h3>{persona.nombre}</h3>
                  <p class="persona-apodo">"{persona.apodo}"</p>
                  <p class="persona-edad">
                    {persona.edad} a√±os ‚Ä¢ {persona.ocupacion}
                  </p>
                </div>
              </div>

              <div class="persona-content">
                <p class="persona-descripcion">{persona.descripcion}</p>

                <div class="persona-dolor">
                  <span class="dolor-label">Su dolor:</span>
                  <p>{persona.dolor}</p>
                </div>

                <div class="persona-sketch">
                  <span class="sketch-label">Sketch relacionado:</span>
                  <a
                    href={`${basePath}/es/contenido/sketches/`}
                    class="sketch-link"
                  >
                    <span class="emoji-cutout emoji-sm theme-solar">üé¨</span>{' '}
                    {persona.sketch}
                  </a>
                </div>
              </div>
            </article>
          ))
        }
      </div>
    </div>
  </section>

  <section class="pain-points-section newspaper-bg aged">
    <div class="container">
      <h2>Entendemos las Barreras</h2>
      <p class="section-intro">
        Sabemos que la sostenibilidad puede parecer complicada. Por eso usamos
        el humor para derribar estos mitos:
      </p>

      <div class="barriers-grid">
        {
          painPoints.map((point) => (
            <div class="magazine-card card-md theme-green interactive">
              <span class="barrier-icon">
                <span class="emoji-cutout emoji-lg theme-community flutter">
                  {point.icon}
                </span>
              </span>
              <h3>{point.titulo}</h3>
              <p class="barrier-creencia">{point.creencia}</p>
              <div class="barrier-solution">
                <span class="solution-label">Nuestra respuesta:</span>
                <p>{point.solucion}</p>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <section class="community-values">
    <div class="container">
      <h2>Nuestros Valores</h2>
      <div class="values-grid">
        <div
          class="magazine-card card-md theme-solar interactive context-feature"
        >
          <span class="value-icon"
            ><span class="emoji-cutout emoji-lg theme-community interactive"
              >ü§ù</span
            ></span
          >
          <h3>Inclusi√≥n</h3>
          <p>Todos son bienvenidos, sin importar su nivel de conocimiento</p>
        </div>
        <div
          class="magazine-card card-md theme-solar interactive context-feature"
        >
          <span class="value-icon"
            ><span class="emoji-cutout emoji-lg theme-solar interactive"
              >üòÑ</span
            ></span
          >
          <h3>Humor</h3>
          <p>Re√≠rnos juntos mientras aprendemos y crecemos</p>
        </div>
        <div
          class="magazine-card card-md theme-solar interactive context-feature"
        >
          <span class="value-icon"
            ><span class="emoji-cutout emoji-lg theme-green interactive"
              >üå±</span
            ></span
          >
          <h3>Acci√≥n</h3>
          <p>Peque√±os pasos que generan grandes cambios</p>
        </div>
        <div
          class="magazine-card card-md theme-solar interactive context-feature"
        >
          <span class="value-icon"
            ><span class="emoji-cutout emoji-lg theme-purple interactive"
              >üí°</span
            ></span
          >
          <h3>Creatividad</h3>
          <p>Soluciones innovadoras para problemas complejos</p>
        </div>
      </div>
    </div>
  </section>

  <section class="join-community">
    <div class="container">
      <h2>Formas de Participar</h2>
      <div class="join-options">
        <div
          class="magazine-card card-md theme-community interactive context-feature"
        >
          <h3>
            <span class="emoji-cutout emoji-md theme-solar">üé¨</span> Crea Contenido
          </h3>
          <p>Comparte tus propios sketches y experiencias sostenibles</p>
          <button class="btn btn-secondary">Crear</button>
        </div>
        <div
          class="magazine-card card-md theme-community interactive context-feature"
        >
          <h3>
            <span class="emoji-cutout emoji-md theme-purple">üì§</span> Comparte
          </h3>
          <p>Difunde el mensaje en tus redes sociales</p>
          <button class="btn btn-secondary">Compartir</button>
        </div>
        <div
          class="magazine-card card-md theme-community interactive context-feature"
        >
          <h3>
            <span class="emoji-cutout emoji-md theme-community">ü§ù</span> Colabora
          </h3>
          <p>√önete como voluntario en eventos MADLAB</p>
          <button class="btn btn-secondary">Voluntariado</button>
        </div>
        <div
          class="magazine-card card-md theme-community interactive context-feature"
        >
          <h3>
            <span class="emoji-cutout emoji-md theme-green">üíö</span> Patrocina
          </h3>
          <p>Apoya el proyecto como empresa sostenible</p>
          <a
            href={`${basePath}/recursos#patrocinadores`}
            class="btn btn-secondary"
          >
            Patrocinar
          </a>
        </div>
      </div>
    </div>
  </section>

  <section class="community-cta">
    <div class="container">
      <div class="cta-content">
        <h2>¬øListo para cambiar el mundo con una sonrisa?</h2>
        <p>√önete a miles de Testigos de Solarpunk en todo M√©xico</p>

        <div class="social-links">
          <a
            href="https://instagram.com/testigosdesolarpunk"
            class="social-link"
            aria-label="Instagram"
            target="_blank"
            rel="noopener noreferrer"
          >
            <span class="emoji-cutout emoji-md theme-purple interactive"
              >üì∑</span
            >
          </a>
          <a
            href="https://tiktok.com/@testigosdesolarpunk"
            class="social-link"
            aria-label="TikTok"
            target="_blank"
            rel="noopener noreferrer"
          >
            <span class="emoji-cutout emoji-md theme-solar interactive">üéµ</span
            >
          </a>
          <a
            href="https://youtube.com/@testigosdesolarpunk"
            class="social-link"
            aria-label="YouTube"
            target="_blank"
            rel="noopener noreferrer"
          >
            <span class="emoji-cutout emoji-md theme-community interactive"
              >üì∫</span
            >
          </a>
          <a
            href="https://twitter.com/testigossolarpk"
            class="social-link"
            aria-label="Twitter"
            target="_blank"
            rel="noopener noreferrer"
          >
            <span class="emoji-cutout emoji-md theme-purple interactive"
              >üê¶</span
            >
          </a>
        </div>

        <div class="magazine-card card-lg theme-tech interactive">
          <h3>Recibe nuestro newsletter</h3>
          <form enctype="application/x-www-form-urlencoded">
            <input
              type="email"
              placeholder="tu@email.com"
              class="email-input"
              required
              aria-required="true"
              aria-label="Correo electr√≥nico para newsletter"
            />
            <button type="submit" class="btn btn-primary"> Suscribirme </button>
          </form>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
  .hero-comunidad {
    background: linear-gradient(
      135deg,
      var(--naranja-comunidad) 0%,
      rgba(255, 111, 53, 0.2) 100%
    );
    padding: var(--espacio-xxl) 0;
    text-align: center;
    color: var(--text-primary);
  }

  /* Ensure readable text on gradient in both themes */
  :global([data-theme='light']) .hero-comunidad {
    color: #000000;
  }

  /* Dark mode - both direct selection and auto theme with dark preference */
  :global([data-theme='dark']) .hero-comunidad,
  :global([data-theme-selection='auto'][data-theme='dark']) .hero-comunidad {
    /* Use white text in dark mode for proper contrast */
    color: #ffffff !important;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  }

  /* Make sure all text elements inherit the color with high specificity */
  .hero-comunidad h1,
  .hero-comunidad p,
  .hero-comunidad .hero-description {
    color: inherit !important;
  }

  /* Extra specificity for dark mode to override theme variables */
  :global([data-theme='dark']) .hero-comunidad h1,
  :global([data-theme='dark']) .hero-comunidad p,
  :global([data-theme='dark']) .hero-comunidad .hero-description,
  :global([data-theme-selection='auto'][data-theme='dark']) .hero-comunidad h1,
  :global([data-theme-selection='auto'][data-theme='dark']) .hero-comunidad p,
  :global([data-theme-selection='auto'][data-theme='dark'])
    .hero-comunidad
    .hero-description {
    color: #ffffff !important;
  }

  .hero-comunidad h1 {
    font-size: 3rem;
    margin-bottom: var(--espacio-md);
  }

  .hero-description {
    font-size: 1.2rem;
    max-width: 600px;
    margin: 0 auto;
    opacity: 0.9;
  }

  /* Personas Section */
  .personas-section {
    padding: var(--espacio-xxl) 0;
  }

  .personas-section h2,
  .pain-points-section h2,
  .community-values h2,
  .join-community h2 {
    text-align: center;
    font-size: 2.5rem;
    margin-bottom: var(--espacio-md);
    color: #2c2c2c;
    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8);
  }

  .section-intro {
    text-align: center;
    font-size: 1.1rem;
    color: #4a4a4a;
    margin-bottom: var(--espacio-xl);
    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.6);
  }

  .personas-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: var(--espacio-xl);
  }

  .persona-header {
    display: flex;
    gap: var(--espacio-md);
    margin-bottom: var(--espacio-lg);
  }

  .persona-avatar {
    width: 80px;
    height: 80px;
    overflow: hidden;
    background: var(--fondo-secundario);
    flex-shrink: 0;
    /* Magazine cutout portrait style */
    clip-path: polygon(
      15% 0%,
      85% 3%,
      100% 15%,
      98% 85%,
      85% 100%,
      15% 97%,
      0% 85%,
      2% 15%
    );
    transform: rotate(-3deg);
    filter: drop-shadow(2px 2px 3px rgba(0, 0, 0, 0.3));
    position: relative;
  }

  .persona-info h3 {
    margin-bottom: var(--espacio-xs);
    color: var(--texto-primario);
  }

  .persona-apodo {
    color: var(--naranja-comunidad);
    font-style: italic;
    margin-bottom: var(--espacio-xs);
  }

  .persona-edad {
    font-size: 0.9rem;
    color: var(--texto-secundario);
  }

  .persona-descripcion {
    margin-bottom: var(--espacio-md);
    line-height: 1.6;
  }

  .persona-dolor,
  .persona-sketch {
    padding: var(--espacio-md);
    background: var(--fondo-secundario);
    border-radius: 8px;
    margin-bottom: var(--espacio-sm);
  }

  .dolor-label,
  .sketch-label {
    font-weight: 600;
    color: var(--texto-primario);
    display: block;
    margin-bottom: var(--espacio-xs);
  }

  .sketch-link {
    color: var(--amarillo-solar);
    text-decoration: none;
    font-weight: 500;
  }

  .sketch-link:hover {
    text-decoration: underline;
  }

  /* Pain Points */
  .pain-points-section {
    padding: var(--espacio-xxl) 0;
  }

  .barriers-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--espacio-xl);
  }

  .barriers-grid {
    text-align: center;
  }

  .barrier-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: var(--espacio-md);
  }

  .barrier-creencia {
    font-size: 1.1rem;
    color: var(--texto-secundario);
    font-style: italic;
    margin-bottom: var(--espacio-lg);
  }

  .barrier-solution {
    padding-top: var(--espacio-md);
    border-top: 1px solid var(--borde-claro);
  }

  .solution-label {
    font-weight: 600;
    color: var(--verde-sostenible);
    display: block;
    margin-bottom: var(--espacio-xs);
  }

  /* Values */
  .community-values {
    padding: var(--espacio-xxl) 0;
    background: var(--fondo-secundario);
  }

  .values-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--espacio-xl);
    max-width: 1000px;
    margin: 0 auto;
  }

  .value-icon {
    font-size: 3rem;
    display: block;
    margin-bottom: var(--espacio-md);
  }

  /* Join Options */
  .join-community {
    padding: var(--espacio-xxl) 0;
  }

  .join-options {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--espacio-xl);
  }

  /* CTA Section */
  .community-cta {
    background: linear-gradient(
      135deg,
      var(--fondo-primario) 0%,
      rgba(255, 111, 53, 0.05) 100%
    );
    padding: var(--espacio-xxl) 0;
  }

  .community-cta .cta-content {
    text-align: center;
    max-width: 600px;
    margin: 0 auto;
  }

  .community-cta h2 {
    font-size: 2.5rem;
    margin-bottom: var(--espacio-md);
  }

  .community-cta p {
    font-size: 1.2rem;
    color: var(--texto-secundario);
    margin-bottom: var(--espacio-xl);
  }

  .social-links {
    display: flex;
    justify-content: center;
    gap: var(--espacio-md);
    margin-bottom: var(--espacio-xl);
  }

  .social-link {
    width: 60px;
    height: 60px;
    background: var(--bg-secondary, #1a1a1b);
    color: var(--text-primary, #ffffff);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    text-decoration: none;
    border: 1px solid var(--border-subtle, rgba(255, 255, 255, 0.1));
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    transition: all 0.3s ease;

    /* DIY Magazine Cutout aesthetic for social links */
    clip-path: polygon(
      20% 0%,
      80% 5%,
      95% 20%,
      100% 40%,
      95% 75%,
      85% 95%,
      60% 100%,
      25% 95%,
      5% 80%,
      0% 55%,
      5% 25%,
      15% 5%
    );
  }

  .social-link:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.4);
    border-color: var(--naranja-comunidad);
  }

  .email-input {
    flex: 1;
    padding: var(--espacio-md);
    border: 2px solid var(--borde-claro);
    border-radius: 8px;
    font-size: 1rem;
  }

  .email-input:focus {
    outline: none;
    border-color: var(--naranja-comunidad);
  }

  @media (max-width: 768px) {
    .hero-comunidad h1 {
      font-size: 2rem;
    }

    .personas-grid {
      grid-template-columns: 1fr;
    }

    .persona-header {
      flex-direction: column;
      text-align: center;
    }

    .persona-avatar {
      margin: 0 auto;
    }
  }
</style>
