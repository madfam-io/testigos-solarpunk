---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths(): Promise<Array<{ params: { slug: string }; props: { script: any } }>> {
  const scripts = await getCollection('scripts');
  return scripts.map((script) => ({
    params: { slug: script.id },
    props: { script },
  }));
}

const { script } = Astro.props;
const { data } = script;
---

<BaseLayout
  title={`${data.titulo} - ${data.episodio}`}
  description={`Guión para ${data.plataforma}: ${data.titulo}. Duración: ${data.duracion}.`}
>
  <div class="container">
    <h1>{data.titulo}</h1>
    <p>Episodio: {data.episodio}</p>
    <p>Plataforma: {data.plataforma}</p>
    <div set:html={script.body} />
  </div>
</BaseLayout>